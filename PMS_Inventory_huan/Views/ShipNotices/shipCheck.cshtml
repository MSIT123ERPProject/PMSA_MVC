@model PMS_Inventory_huan.Models.PurchaseOrder

@{
    ViewBag.Title = "shipCheck";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@Html.Raw(TempData["failmessage"])
@Html.Raw(TempData["successmessage"])
<h2>shipCheck</h2>

<div>
    <h4>PurchaseOrder</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.PurchaseOrderOID)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.PurchaseOrderOID)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.ReceiverName)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.ReceiverName)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.ReceiverTel)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.ReceiverTel)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.ReceiverMobile)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.ReceiverMobile)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.ReceiptAddress)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.ReceiptAddress)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.CreateDate)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.CreateDate)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.PurchaseOrderStatus)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.PurchaseOrderStatus)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.SignStatus)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.SignStatus)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Employee.Name)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Employee.Name)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.SignFlow.OriginatorID)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.SignFlow.OriginatorID)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.SupplierInfo.SupplierName)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.SupplierInfo.SupplierName)
        </dd>

    </dl>
</div>
<p>
   <button><a id="idshipCheck" data-wc="@Model.PurchaseOrderID">確定出貨</a> </button> 
    @*@Html.ActionLink("確定出貨", "shipChecked", new { id = Model.PurchaseOrderID }) |*@
    @Html.ActionLink("Back to List", "Index")
</p>
<div id="message"></div>


@section scripts{
    <script>
        $(document).ready(function () {

        });

        $("#idshipCheck").click(function () {
            Swal.fire({
                title: '確定出貨?',
                text: "出貨後將發出通知",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: '確定出貨',
                cancelButtonText:'取消'
            }).then((result) => {
                if (result.value) {
                    let idship = this.dataset.wc;
                    $.ajax({//如果方法那邊貼上[httppost] 不知道為甚麼他跟我要該控制器方法同名的VIEW，難道每個方法都要有自己的VIEW?
                        url: `@Url.Action("shipChecked","ShipNotices")` ,
                        type: 'GET',
                        dataType:'json',
                        data: { id : idship }
                    }).done(function (result) {
                        $("#message").html(result);
                        //Swal.fire({
                        //    position: 'top-end',
                        //    icon: 'success',
                        //    title: '出貨處理成功',
                        //    showConfirmButton: true,
                        //    timer: 1500
                        //})
                    }).fail(function () {
                        Swal.fire({
                            icon: 'error',
                            title: 'Oops...',
                            text: '處理出貨時發生錯誤',
                            footer:""
                        })
                    });
                }
            })
        });
    </script>
}
